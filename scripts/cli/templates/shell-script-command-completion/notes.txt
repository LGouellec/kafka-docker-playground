cd /Users/vsaboulin/Documents/github/kafka-docker-playground/scripts/cli

bashly render templates/shell-script-command-completion .
yq -o=json playground.yaml > playground.json

{ printf "["; cat playground.json | jq -c; cat templates/shell-script-command-completion/general_end.json; } | tr -d '\n' > general.json

cat general.json | jq .
gzip -f general.json

rm -rf extension
mkdir extension
curl -L https://tetradresearch.gallery.vsassets.io/_apis/public/gallery/publisher/tetradresearch/extension//vscode-h2o/0.2.12/assetbyname/Microsoft.VisualStudio.Services.VSIXPackage -o extension/extension.zip
unzip extension/extension.zip


sed -E -e "s|https://github.com/yamaton/h2o-curated-data/raw/main/\${kind}.json.gz|https://github.com/vdesabou/kafka-docker-playground/raw/master/scripts/cli/general.json.gz|g" extension/out/cacheFetcher.js
zip -r extension.zip extension
rm -f extension.vsix
mv extension.zip extension.vsix

code --uninstall-extension extension.vsix
code --disable-extension extension.vsix
code --install-extension extension.vsix

cd -


# https://github.com/yamaton/h2o-curated-data/blob/main/general/yaml/minikube.yaml

